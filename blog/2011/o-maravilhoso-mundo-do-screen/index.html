<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml" xmlns:og="http://ogp.me/ns#" xml:lang="en" lang="en">

<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta http-equiv="imagetoolbar" content="false" />

<!-- Title -->
<title> The wonderful world of Screen |  Ellison Leão - Drumming and Coding</title>

<!-- Custom Fonts -->
<link href="http://fonts.googleapis.com/css?family=Oswald:400,700" rel="stylesheet" type="text/css" />
<link href="http://fonts.googleapis.com/css?family=PT+Sans:400,700,400italic" rel="stylesheet" type="text/css" />
<link href='http://static.tumblr.com/dbek3sy/VtLmbsu90/socialico.css' rel='stylesheet' type='text/css'>
<link rel="stylesheet" type="text/css" href="/stylesheets/styles.css"></link>  

<!--

<meta name="image:Logo 200x200" content="http://static.tumblr.com/morei1o/oIomgo6sn/logo200x200.png"/>
<meta name="image:Logo Retina 400x400" content="http://static.tumblr.com/morei1o/jEymgo6u2/logo_retina400x400.png"/>

-->

<!-- For Syntax Highlighting -->
<script src="http://code.jquery.com/jquery-latest.min.js"></script>
<script src="/javascripts/jquery.fitvids.js"></script>
<link rel="stylesheet" type="text/css" href="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.css"></link>  
<script src="http://google-code-prettify.googlecode.com/svn/trunk/src/prettify.js"></script>  
<script type="text/javascript">
$(document).ready(function(){
  // Target your .container, .wrapper, .post, etc.
  $(".embed-video-container").fitVids();
});
function styleCode()
{
	if (typeof disableStyleCode != 'undefined') { return; }

	var a = false;

	$('code').each(function() {
	if (!$(this).hasClass('prettyprint') && !$(this).hasClass('uglyprint')) {
	$(this).addClass('prettyprint');
	a = true;
	}
	});

	if (a) { prettyPrint(); } 
}
$(function() {styleCode();});
</script>
<body>
	<!-- Sidebar -->
	<div id="sidebar">

		<!-- Logo -->
		<div class="logo">
			<a href="/" title="">
				<span class="img"></span>
			</a>
		</div>
		
			<h1><a href="/" title="Ellison Leão">Ellison Leão</a></h1>
			<h3 class="description">Drumming and coding</h3>

		<!-- Navigation -->
		<ul class="navigation">
			<li><a href="http://github.com/ellisonleao">github</a></li>
			<li><a href="http://twitter.com/ellisonleao">@ellisonleao</a></li>
			<li><a href="http://facebook.com/ellisonleao">facebook</a></li>
			<li><a href="https://plus.google.com/111892124923456159049/">G+</a></li>
		</li>

		<div class="sidebar">
		  
		</div>
	</div>

	<div id="main">
		<div class="article">
	<div class="article_contents">

		<div class="date">








  




<time datetime="2011-09-22T00:47:00-03:00" pubdate data-updated="true">Sep 22<span>nd</span>, 2011</time>
</div>
		<div class="post">
			<h2 class="title">
				
					The Wonderful World of Screen
				
			</h2>

			<div class="text">
				
					<p>According to the manual, “Screen is a full-screen window manager that multiplexes a physical terminal between several processes, typically interactive shells,” in other words, imagine having multiple terminals open in the same ssh session, with each one having their separate processes (with other ssh connections). Have you Imagined? Now imagine that you can keep that session active in the server connected by the time you want. Therefore, your tasks will be active on the server as long as you want and there be no problem if  a connection failure happens. In this post, I will show some of the characteristics of the screen and teach a simple script that generates a session with 3 “tabs” opened for one project.</p>

<h1 id="installing-screen">Installing Screen</h1>

<p>To install screen, for Ubuntu and Debian users, open a terminal and just type:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">~# sudo apt-get install screen
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>To other distros, you can download screen in the <a href="http://www.gnu.org/software/screen/">official site</a></p>

<h1 id="configuring-a-screenrc-file">Configuring a .screenrc file</h1>

<p>We can configure a simple but cool visual interface for screen, modifying our .screenrc file . Open your favorite text editor and edit the file ~/.screenrc:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">hardstatus alwayslastline
</span><span class="line">hardstatus string <span class="s1">&#39;%{= kG}[ %{G}%H %{g}][%= %{= kw}%?%-Lw%?%{r}(%{W}%n*%f%t%?(%u)%?%{r})%{w}%?%+Lw%?%?%= %{g}][%{B} %d/%m %{W}%c %{g}]&#39;</span>
</span><span class="line">vbell on
</span><span class="line">defscrollback 1024
</span><span class="line">startup_message off
</span><span class="line">autodetach on
</span><span class="line">defutf8 on
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Now let’s open our screen. Go to the terminal and type <em>screen</em>. You should see a screen like this:</p>

<p><img src="http://2.bp.blogspot.com/_iWsqNoMkfno/TIJkuLOBtnI/AAAAAAAAAOg/I9ehKHxgI1w/s1600/screen.png" alt="" /></p>

<p>Here  we can find some useful informations:</p>

<ul>
  <li>Left side: Host name that you’re connected</li>
  <li>Center:  Actual “Tab”</li>
  <li>Right side: Server Date/Time</li>
</ul>

<p>Screen uses the command “Ctrl-A” as a signal to send commands to screen instead of the shell.</p>

<p>Some basics commands on screen:</p>

<ul>
  <li>(Ctrl+A) + C - Creates new “Tab”</li>
  <li>(Ctrl+D) - Remove current “Tab”</li>
  <li>(Ctrl+A) + D - Detach the screen session</li>
</ul>

<p>Between “Tabs”:</p>

<ul>
  <li>(Ctrl+A) + N - Go to the next “tab”</li>
  <li>(Ctrl+A) + P - Go to the previous “tab”</li>
  <li>(Ctrl+A) + NUM - Go to “tab” number = NUM</li>
</ul>

<p>For more commands just type (Ctrl+A) + ? for help.</p>

<h1 id="a-general-script-to-create-a-development-environment">A general script to create a development environment</h1>

<p>Now it’s time to create a cool script that allow us to call screen with 3 pre-opened tabs, each one with its own functionality. 
In my projects i use to put one tab for run general services (web servers, etc), another tab for VIM editor and another tab with a bash for general commands. The script was created with (Uncle Paul’s)[http://vimnox.wordpress.com/] help.</p>

<p>Let’s call the script <em>newscreen</em> . Create a file <em>newscreen</em> and put the following code:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="nb">source</span> <span class="nv">$HOME</span>/.screenrc
</span><span class="line">screen -t server
</span><span class="line">screen -t vim
</span><span class="line">screen -t bash
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Save the file on <strong>/usr/local/bin/</strong> . That script is gonna be called by another script that we’ll call <em>createscreen</em>. Create anothe file called <em>createscreen</em> and put the following code:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line"><span class="c">#!/bin/bash</span>
</span><span class="line">
</span><span class="line"><span class="k">if</span> <span class="o">[</span> &amp;amp;quot;<span class="nv">$#&amp;</span>amp;quot; -ne 1 <span class="o">]</span>
</span><span class="line"><span class="k">then</span>
</span><span class="line"><span class="nb">echo</span> &amp;amp;quot;Digite o nome <span class="k">do </span>projeto&amp;amp;quot;
</span><span class="line"><span class="k">else</span>
</span><span class="line">screen -RR <span class="nv">$1</span> -c /usr/local/bin/newscreen
</span><span class="line"><span class="k">fi</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>Also save this file on <strong>/usr/local/bin/</strong> . After all set and done, give the execution permissions to <em>createscreen</em> file (chmod +x). Now we can use the script by typing:</p>

<div class="bogus-wrapper"><notextile><figure class="code"> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
</pre></td><td class="code"><pre><code class="bash"><span class="line">~# /usr/local/bin newscreen PROJECTNAME
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>And that’s it! See you at next post!</p>

					
			</div>
		</div>

	</div>
</div>
	</div>
</body>
</html>

